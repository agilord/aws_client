String buildEndpointConfig(Map<String, Object> regionConfigData) {
  final rules = regionConfigData['rules'] as Map<String, Object>;
  final patterns = regionConfigData['patterns'] as Map<String, Object>;

  final code = StringBuffer()..writeln('''
// AUTO-GENERATED: This file is generated by the `generator` package

import 'endpoint.dart';

final rules = <String, RegionConfig>{
''');
  for (var ruleEntry in rules.entries) {
    final value = ruleEntry.value;
    String valueCode;
    if (value is String) {
      valueCode = '_$value';
    } else {
      valueCode = _toRegionConfig(value as Map<String, Object>);
    }

    code.writeln("'${ruleEntry.key}': $valueCode,");
  }

  code.writeln('};');

  for (var pattern in patterns.entries) {
    code.writeln('');
    code.writeln(
        'final _${pattern.key} = ${_toRegionConfig(pattern.value as Map<String, Object>)};');
  }

  return '$code';
}

String _toRegionConfig(Map<String, Object> config) {
  final code = StringBuffer('RegionConfig(');
  for (var property in config.entries) {
    final propertyValue = property.value;
    String valueCode;
    if (propertyValue is bool) {
      valueCode = '$propertyValue';
    } else {
      valueCode = "'$propertyValue'";
    }
    code.writeln('${property.key}: $valueCode,');
  }
  code.writeln(')');
  return '$code';
}
